const registroProducto=document.querySelector("#registro_producto_mercado");function mostrarMensaje(t){t.preventDefault();validarCampos()&&Swal.fire({title:"Registrar Producto?",icon:"question",showCancelButton:"Cancelar",confirmButtonText:"Guardar"}).then(e=>{e.isConfirmed&&(Swal.fire("Guardado con exito!","","success"),registerProduct(t))})}function validarCampos(){const t=document.querySelector("#producto"),e=(document.querySelector("#marca"),document.querySelector("#precio"));return!(!t.value||!e.value)||(Swal.fire("Falta informaciÃ³n!","","error"),!1)}async function registerProduct(){try{const t=new FormData(registroProducto),e="http://localhost:3000/API/registro-producto",o=await fetch(e,{method:"POST",body:t});await o.json()&&setTimeout(()=>{document.querySelector(".swal2-container").remove();document.querySelectorAll('input[type="text"], input[type="number"]').forEach((function(t){t.value=""}))},2e3)}catch(t){Swal.fire("Error!","","error")}}registroProducto&&registroProducto.addEventListener("submit",(function(t){mostrarMensaje(t)}));const listaSelect=document.querySelector("#option-list-select");let productos={id:"",fecha:"",producto:"",marca:"",precio:"",cantidad:"",categoria:"",foto:"",observacion:"",usuarioId:""};async function obtenerProductos(){try{const t="http://localhost:3000/API/obtener-producto",e=await fetch(t),o=await e.json();o&&(productos=[...o],limpiarLista(),ordenarProductos(o))}catch(t){console.log(t)}}function ordenarProductos(t){t.sort((t,e)=>t.categoria<e.categoria?-1:t.categoria>e.categoria?1:t.categoria===e.categoria?0:void 0),mostrarListas(t)}function mostrarListas(t){const e=document.querySelector("#lista_articulos");t.forEach((function(t){const o=document.createElement("LI");o.classList.add("articulos");const r=document.createElement("LI");r.classList.add("articulos-categoria");const a=document.createElement("DIV");a.classList.add("div-product");const c=document.createElement("DIV");c.classList.add("div-category");const n=document.createElement("LABEL");n.textContent=t.producto,n.classList.add("label-producto"),n.setAttribute("for",t.producto);const i=document.createElement("LABEL");i.textContent=t.categoria,i.classList.add("label-categoria");const s=document.createElement("INPUT");s.setAttribute("type","checkbox"),s.setAttribute("name",t.producto),a.appendChild(s),a.appendChild(n),c.appendChild(i),o.appendChild(a),r.appendChild(c),e.appendChild(o),e.appendChild(r)}))}function filtrar(){limpiarLista();let t=[];productos.forEach(e=>{(e.categoria===listaSelect.value||"todos"===listaSelect.value)&&t.push(e)}),mostrarListas(t)}function limpiarLista(){const t=document.querySelector("#lista_articulos");for(;t.firstChild;)t.removeChild(t.firstChild)}listaSelect.addEventListener("change",(function(){filtrar()})),document.addEventListener("DOMContentLoaded",(function(){obtenerProductos()}));